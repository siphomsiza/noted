<div class="row">
	<div class="panel panel-default col-lg-12">
		<div class="panel-heading">
			<h3>Summary of Results</h3>
		</div>
		<div class="panel-body">
			<table class="table table-hover">
      	<thead>
        	<tr>
          	<th>Summary of Results</th>
          	<th>All KPIs</th>
          	<th>All KPIs Percentages</th>
          	<th>Total KPIs Measured</th>
          	<th>Measured KPIs Percentages</th>
          	<th colspan="3"></th>
        	</tr>
      	</thead>
      	<tbody>
        	<tr>
          	<td>KPI Not Yet Measured</td>
          	<td><%= @kpi_not_yet_measured.count %></td>
          	<td><%= (@kpi_not_yet_measured.count * @get_all_kpis.count)/100 %> %</td>
          	<td></td>
          	<td></td>
        	</tr>
					<tr>
          	<td>KPI Not Met</td>
          	<td><%= @kpi_not_met.count %></td>
          	<td><%= (@kpi_not_met.count * @get_all_kpis.count)/100 %> %</td>
          	<td><%= (@kpi_not_met.count) %></td>
          	<td><%= (@kpi_measured.count * @kpi_not_met.count)/100 %> %</td>
        	</tr>
        	<tr>
          	<td>KPI Almost Met</td>
          	<td><%= @kpi_almost_met.count %></td>
          	<td><%= (@kpi_almost_met.count * @get_all_kpis.count)/100 %> %</td>
          	<td><%= (@kpi_almost_met.count) %></td>
          	<td><%= (@kpi_measured.count * @kpi_almost_met.count)/100 %> %</td>
        	</tr>
        	<tr>
          	<td>KPI Met</td>
          	<td><%= @kpi_met.count %></td>
          	<td><%= (@kpi_met.count * @get_all_kpis.count)/100 %> %</td>
          	<td><%= (@kpi_met.count) %></td>
          	<td><%= (@kpi_measured.count * @kpi_met.count)/100 %> %</td>
        	</tr>
        	<tr>
          	<td>KPI Well Met</td>
          	<td><%= @kpi_well_met.count %></td>
          	<td><%= (@kpi_well_met.count * @get_all_kpis.count)/100 %> %</td>
          	<td><%= (@kpi_well_met.count) %></td>
          	<td><%= (@kpi_measured.count * @kpi_well_met.count)/100 %> %</td>
        	</tr>
        	<tr>
          	<td>KPI Extremely Well Met</td>
          	<td><%= @kpi_extremely_well_met.count %></td>
          	<td><%= (@kpi_extremely_well_met.count * @get_all_kpis.count)/100 %> %</td>
          	<td><%= (@kpi_extremely_well_met.count) %></td>
          	<td><%= (@kpi_measured.count * @kpi_extremely_well_met.count)/100 %> %</td>
        	</tr>
        	<td>Total KPIs</td>
          	<td><%= @get_all_kpis.count %></td>
          	<td><%= (@get_all_kpis.count * 100)/@get_all_kpis.count %> %</td>
          	<td><%= @kpi_measured.count %></td>
          	<td><%= (@kpi_measured.count * 100)/@get_all_kpis.count %> %</td>
        	</tr>
      	</tbody>
    	</table>
		</div>
		<!-- /.panel-body -->
	</div>
</div>
<div class="row">
	<h3>Total Performance Standards for Mkhondo Municipality</h3>
	<div class="panel panel-default col-md-6">
		<div class="panel-body">
			<div class="col-md-6">
	        <%= pie_chart @departmental_sdbips.group(:performance_standard).count, width: "400px", height: "250px" %>
	    </div>
		</div>
		<!-- /.panel-body -->
	</div>
	<div class="panel panel-default col-md-6">
		<div class="panel-body">
			<%= column_chart @departmental_sdbips.group(:department_id,:performance_standard).count, width: "400px", height: "250px" %>
		</div>
		<!-- /.panel-body -->
	</div>
</div>
<div class="row">
	<div class="panel panel-default col-lg-12">
		<div class="panel-heading">
			<h3>Total Performance Standards per Department</h3>
		</div>
		<div class="panel-body">
			<table class="table table-hover">

	      <thead>
	        <tr>
	          <th></th>
	          <th>Mkhondo Municipality</th>
	          <th>Municipal Manager's Office</th>
	          <th>Financial Services</th>
	          <th>Community Services</th>
	          <th>Corporate Services</th>
	          <th>Technical Services</th>
	          <th>Planning and Development</th>
	          <th colspan="3"></th>
	        </tr>
	      </thead>

	      <tbody>
	        <tr>
	          <td>KPI Not Met</td>
          <td><%= (@kpi_not_met.count * 100)/@get_all_kpis.count %> %</td>
	          <td><%= (@kpi_not_met_municipal_manager.count * 100)/@get_municipal_manager.count %> %</td>
	          <td><%= (@kpi_not_met_financial_services.count * 100)/@get_financial_services.count %> %</td>
	          <td><%= (@kpi_not_met_community_services.count * 100)/@get_community_services.count %> %</td>
	          <td><%= (@kpi_not_met_corporate_services.count * 100)/@get_corporate_services.count %> %</td>
	          <td><%= (@kpi_not_met_technical_services.count * 100)/@get_technical_services.count %> %</td>
	          <td><%= (@kpi_not_met_planning_and_development.count * 100)/@get_planning_and_development.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Almost Met</td>
          <td><%= (@kpi_almost_met.count * 100)/@get_all_kpis.count %> %</td>
	          <td><%= (@kpi_almost_met_municipal_manager.count * 100)/@get_municipal_manager.count %> %</td>
	          <td><%= (@kpi_almost_met_financial_services.count * 100)/@get_financial_services.count %> %</td>
	          <td><%= (@kpi_almost_met_community_services.count * 100)/@get_community_services.count %> %</td>
	          <td><%= (@kpi_almost_met_corporate_services.count * 100)/@get_corporate_services.count %> %</td>
	          <td><%= (@kpi_almost_met_technical_services.count * 100)/@get_technical_services.count %> %</td>
	          <td><%= (@kpi_almost_met_planning_and_development.count * 100)/@get_planning_and_development.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Met</td>
          <td><%= (@kpi_met.count * 100)/@get_all_kpis.count %> %</td>
	          <td><%= (@kpi_met_municipal_manager.count * 100)/@get_municipal_manager.count %> %</td>
	          <td><%= (@kpi_met_financial_services.count * 100)/@get_financial_services.count %> %</td>
	          <td><%= (@kpi_met_community_services.count * 100)/@get_community_services.count %> %</td>
	          <td><%= (@kpi_met_corporate_services.count * 100)/@get_corporate_services.count %> %</td>
	          <td><%= (@kpi_met_technical_services.count * 100)/@get_technical_services.count %> %</td>
	          <td><%= (@kpi_met_planning_and_development.count * 100)/@get_planning_and_development.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Well Met</td>
	          <td></td>
	          <td><%= (@kpi_well_met_municipal_manager.count * 100)/@get_municipal_manager.count %> %</td>
	          <td><%= (@kpi_well_met_financial_services.count * 100)/@get_financial_services.count %> %</td>
	          <td><%= (@kpi_well_met_community_services.count * 100)/@get_community_services.count %> %</td>
	          <td><%= (@kpi_well_met_corporate_services.count * 100)/@get_corporate_services.count %> %</td>
	          <td><%= (@kpi_well_met_technical_services.count * 100)/@get_technical_services.count %> %</td>
	          <td><%= (@kpi_well_met_planning_and_development.count * 100)/@get_planning_and_development.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Extremely Well Met</td>
          <td><%= (@kpi_extremely_well_met.count * 100)/@get_all_kpis.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_municipal_manager.count * 100)/@get_municipal_manager.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_financial_services.count * 100)/@get_financial_services.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_community_services.count * 100)/@get_community_services.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_corporate_services.count * 100)/@get_corporate_services.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_technical_services.count * 100)/@get_technical_services.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_planning_and_development.count * 100)/@get_planning_and_development.count %> %</td>
	        </tr>
	      </tbody>
	    </table>
		</div>
		<!-- /.panel-body -->
	</div>
</div>
<div class="row">
	<h3>Total Performance Results per KPA</h3>
	<div class="panel panel-default col-md-6">
		<div class="panel-body">
			<div class="col-md-6">
	      <%= pie_chart @departmental_sdbips.group(:kpa_id).count, width: "400px", height: "250px" %>
	    </div>
		</div>
		<!-- /.panel-body -->
	</div>
	<div class="panel panel-default col-md-6">
		<div class="panel-body">
			<%= column_chart @departmental_sdbips.group(:kpa_id,:performance_standard).count, width: "400px", height: "250px" %>
		</div>
		<!-- /.panel-body -->
	</div>
</div>
<div class="row">
	<div class="panel panel-default col-lg-12">
		<div class="panel-heading">
			<h3>Total Performance Standards per KPA</h3>
		</div>
		<div class="panel-body">
			<table class="table table-hover">

	      <thead>
	        <tr>
	          <th></th>
	          <th>Basic Service Delivery</th>
	          <th>Good Governance and Public Participation</th>
	          <th>Local Economic Development</th>
	          <th>Municipal Finacial Viability and Management</th>
	          <th>Municipal Transformation and Institutional Development</th>
	          <th colspan="3"></th>
	        </tr>
	      </thead>

	      <tbody>
	        <tr>
	          <td>KPI Not Met</td>
	          <td><%= (@kpi_not_met_basic_service_delivery.count * 100)/@get_basic_service_delivery.count %> %</td>
	          <td><%= (@kpi_not_met_good_governance.count * 100)/@get_good_governance.count %> %</td>
	          <td><%= (@kpi_not_met_economic_development.count * 100)/@get_economic_development.count %> %</td>
	          <td><%= (@kpi_not_met_financial_viability.count * 100)/@get_financial_viability.count %> %</td>
	          <td><%= (@kpi_not_met_municipal_transformation.count * 100)/@get_municipal_transformation.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Almost Met</td>
	          <td><%= (@kpi_almost_met_basic_service_delivery.count * 100)/@get_basic_service_delivery.count %> %</td>
	          <td><%= (@kpi_not_met_good_governance.count * 100)/@get_good_governance.count %> %</td>
	          <td><%= (@kpi_almost_met_economic_development.count * 100)/@get_economic_development.count %> %</td>
	          <td><%= (@kpi_almost_met_financial_viability.count * 100)/@get_financial_viability.count %> %</td>
	          <td><%= (@kpi_almost_met_municipal_transformation.count * 100)/@get_municipal_transformation.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Met</td>
	          <td><%= (@kpi_met_basic_service_delivery.count * 100)/@get_basic_service_delivery.count %> %</td>
	          <td><%= (@kpi_met_good_governance.count * 100)/@get_good_governance.count %> %</td>
	          <td><%= (@kpi_met_economic_development.count * 100)/@get_economic_development.count %> %</td>
	          <td><%= (@kpi_met_financial_viability.count * 100)/@get_financial_viability.count %> %</td>
	          <td><%= (@kpi_met_municipal_transformation.count * 100)/@get_municipal_transformation.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Well Met</td>
	          <td><%= (@kpi_well_met_basic_service_delivery.count * 100)/@get_basic_service_delivery.count %> %</td>
	          <td><%= (@kpi_well_met_good_governance.count * 100)/@get_good_governance.count %> %</td>
	          <td><%= (@kpi_well_met_economic_development.count * 100)/@get_economic_development.count %> %</td>
	          <td><%= (@kpi_well_met_financial_viability.count * 100)/@get_financial_viability.count %> %</td>
	          <td><%= (@kpi_well_met_municipal_transformation.count * 100)/@get_municipal_transformation.count %> %</td>
	        </tr>
	        <tr>
	          <td>KPI Extremely Well Met</td>
	          <td><%= (@kpi_extremely_well_met_basic_service_delivery.count * 100)/@get_basic_service_delivery.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_good_governance.count * 100)/@get_good_governance.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_economic_development.count * 100)/@get_economic_development.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_financial_viability.count * 100)/@get_financial_viability.count %> %</td>
	          <td><%= (@kpi_extremely_well_met_municipal_transformation.count * 100)/@get_municipal_transformation.count %> %</td>
	          <td></td>
	          <td></td>
	        </tr>
	        </tr>
	      </tbody>
	      </table>
		</div>
		<!-- /.panel-body -->
	</div>
</div>
<p id="pdf_link"><%= link_to "Download Report (PDF)", departmental_sdbip_progresses_path(@departmental_sdbip, :format => "pdf") %></p>
