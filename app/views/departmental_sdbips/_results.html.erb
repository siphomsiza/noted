<div class="row">
<div class="table-responsive">
<table class="table table-condensed table-bordered table-striped">
  <tr>
    <th rowspan="2"></th>
    <th colspan="3">Period Performance</th>
    <th rowspan="2" colspan="1">Performance Comments</th>
    <th rowspan="2" colspan="1">Corrective Measures</th>
    <th rowspan="2" colspan="1">Proof of Evidence</th>
    <th rowspan="2" colspan="1">Update Status</th>
    <th rowspan="2" colspan="1">Assurance Status</th>
  </tr>
  <tr>
    <th>Target</th>
    <th>Actual</th>
    <th>Results</th>
  </tr>
  <tr>
    <th>July</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 7 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
        <%= kpi_result.departmental_sdbip.source_of_evidence %>
        <% kpi_result.attachments.each do |attachment| %>
          <%= link_to attachment.poe,attachment.poe_url, target: '_blank' %>
        <% end %>
    </td>
    <td>
      <%= kpi_result.user.firstname %>&nbsp;
      <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td>
      <%= render "assurance_results" %>
    </td>
    <% end %>
  </tr>
  <tr>
    <th>August</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 8 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe_url %>
      <% end %>
    </td>
    <td>
      <%= kpi_result.user.firstname %>&nbsp;
      <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td>
      <%= render "assurance_results" %>
    </td>
    <% end %>
  </tr>
  <tr>
    <th>Sepetember</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 9 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td>
      <%= render "assurance_results" %>
    </td>
    <% end %>
  </tr>
  <tr>
    <th>October</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 10 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td>
      <%= render "assurance_results" %>
    </td>
    <% end %>
  </tr>
  <tr>
    <th>November</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 11 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td>
      <%= render "assurance_results" %>
    </td>
    <% end %>
  </tr>
  <tr>
    <th>December</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 12 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td>
      <%= render "assurance_results" %>
    </td>
    <% end %>
  </tr>
  <tr>
    <th>January</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 1 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td><%= render "assurance_results" %></td>
    <% end %>
  </tr>
  <tr>
    <th>February</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 2 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td><%= render "assurance_results" %></td>
    <% end %>
  </tr>
  <tr>
    <th>March</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 3 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td><%= render "assurance_results" %></td>
    <% end %>
  </tr>
  <tr>
    <th>April</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 4 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td><%= render "assurance_results" %></td>
    <% end %>
  </tr>
  <tr>
    <th>May</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 5 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td><%= render "assurance_results" %></td>
    <% end %>
  </tr>
  <tr>
    <th>June</th>
    <% @departmental_sdbip.kpi_results.where("extract(month  from created_at) = ?", 6 ).each do |kpi_result| %>
    <td><%= kpi_result.target %></td>
    <td><%= kpi_result.actual %></td>
    <td><%= kpi_result.kpi_performance_standard %></td>
    <td><%= kpi_result.performance_comments %></td>
    <td><%= kpi_result.corrective_measures %></td>
    <td>
      <% kpi_result.attachments.each do |attachment| %>
        <%= link_to attachment.poe %>
      <% end %>
    </td>
    <td>
        <%= kpi_result.user.firstname %>&nbsp;
        <%= kpi_result.user.surname %>&nbsp;on
        <%= kpi_result.updated_at.strftime("%d-%b-%Y") %>
    </td>
    <td><%= render "assurance_results" %></td>
    <% end %>
  </tr>
</table>
</div>
</div>
